import{f as he,r,a as k,j as s,b as e,G as ge,A as Y,L as fe,F as Z,N as Se,E as pe,P as _e,D as xe,V as Ne,c as j,d as R,e as U,g as W,R as ve,U as Ce,h as Ee,i as O,k as Be,S as z,l as we,m as Fe,C as ee,n as te,o as ne,p as se,q as Ae,s as ke,t as Ie,u as ie,v as ae,w as De,x as ce,y as oe,z as be,B as ye}from"./vendor.8c2ecdf3.js";const Pe=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))h(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const S of u.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&h(S)}).observe(document,{childList:!0,subtree:!0});function d(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerpolicy&&(u.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?u.credentials="include":o.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function h(o){if(o.ep)return;o.ep=!0;const u=d(o);fetch(o.href,u)}};Pe();const ze="_nav_11k4b_2",Le="_title_11k4b_12",Te="_subTitle_11k4b_20",Ge="_main_11k4b_29",Oe="_gameList_11k4b_33",$e="_singleGameEntryButton_11k4b_39",Me="_buttonIcon_11k4b_54",je="_addIcon_11k4b_58",Re="_createPanel_11k4b_65",Ue="_createPanelTitle_11k4b_75",We="_createPanelInput_11k4b_81",Ve="_createButton_11k4b_87";var I={nav:ze,title:Le,subTitle:Te,main:Ge,gameList:Oe,singleGameEntryButton:$e,buttonIcon:Me,addIcon:je,createPanel:Re,createPanelTitle:Ue,createPanelInput:We,createButton:Ve};const c=new he;c.set("updateEditor",!0);const de={editorTag:"\u6E38\u620F\u914D\u7F6E",domain:"",gameList:[],currentEditGame:"",currentGameConfig:{},currentDir:"",currentDirContent:[],currentEditScene:"",currentOpendSceneEdit:[],currentSceneSentenceList:[],sceneScrollTop:{},isRealtimeRefreashPreview:!0,wsConn:null},n=JSON.parse(JSON.stringify(de)),qe=()=>{const[t,i]=r.exports.useState(!0),[d,h]=r.exports.useState(!1);r.exports.useEffect(()=>{c.set("refManagement",t),c.connect("refManagement",()=>{i(c.get("refManagement"))},"refManagementFunc"),o()},[]);const o=()=>{k.get(n.domain+"/api/manageGame/gameList").then(m=>{n.gameList=m.data,c.set("refManagement",!c.get("refManagement"))}).catch(m=>{console.log(m)})};let u=[];for(const m of n.gameList){const g=s("div",{className:I.singleGameEntryButton,onClick:()=>{for(const p in n)n[p]=de[p];n.currentEditGame=m,c.set("isManagement",!1)},children:[e(ge,{theme:"outline",size:"24",fill:"#333",className:I.buttonIcon}),m]},m);u.push(g)}const S=m=>{const g=`${n.domain}/api/manageGame/createGame/${m}`;k.get(g).then(p=>{h(!1),o()})};return s("div",{children:[e("header",{children:e("nav",{children:e("div",{className:I.nav,children:e("div",{className:I.title,children:"WebGAL ORIGINE"})})})}),s("main",{className:I.main,children:[s("div",{className:I.subTitle,children:["\u6E38\u620F\u5217\u8868",s("span",{onClick:()=>h(!d),className:I.addIcon,children:[e(Y,{theme:"outline",size:"18",fill:"#8E354A"})," \u65B0\u5EFA\u6E38\u620F"]}),d&&s("div",{className:I.createPanel,children:[e("div",{className:I.createPanelTitle,children:"\u521B\u5EFA\u6E38\u620F"}),s("div",{children:["\u6E38\u620F\u540D\u79F0\uFF1A",e("input",{id:"createInput",className:I.createPanelInput})]}),e("div",{style:{textAlign:"center"},children:e("div",{onClick:()=>S(document.getElementById("createInput").value),className:I.createButton,children:"\u521B\u5EFA"})})]})]}),e("div",{className:I.gameList,children:u})]})]})},Je="_nav_9g3my_1",Ke="_title_9g3my_14",He="_titleIcon_9g3my_22";var V={nav:Je,title:Ke,titleIcon:He};const Qe=()=>s("div",{className:V.nav,children:[e(fe,{theme:"filled",size:"30",fill:"#333",className:V.titleIcon,onClick:()=>{c.set("isManagement",!0)}}),e("div",{className:V.title,children:"WebGAL ORIGINE"})]}),Xe="_aside_z70wz_1",Ye="_option_z70wz_11",Ze="_optionMarker_z70wz_21",et="_optionMarkerOff_z70wz_29",tt="_chooseItem_z70wz_37",nt="_chooseTitle_z70wz_48",st="_chooseDescription_z70wz_53",it="_tagButton_z70wz_58",at="_tagButtonOn_z70wz_71",ct="_sideBarContent_z70wz_76",ot="_previewWindow_z70wz_83",dt="_sideBarMain_z70wz_88",lt="_asidePreviewControlBar_z70wz_97",rt="_asidePreviewControlBar_button_z70wz_105",ut="_asidePreviewControlBar_single_z70wz_117";var A={aside:Xe,option:Ye,optionMarker:Ze,optionMarkerOff:et,chooseItem:tt,chooseTitle:nt,chooseDescription:st,tagButton:it,tagButtonOn:at,sideBarContent:ct,previewWindow:ot,sideBarMain:dt,asidePreviewControlBar:lt,asidePreviewControlBar_button:rt,asidePreviewControlBar_single:ut};const mt="_title_1342l_1",ht="_previewGameButton_1342l_9",gt="_gameNameInput_1342l_18";var T={title:mt,previewGameButton:ht,gameNameInput:gt};const ft="_choosed_tnciw_1",St="_chooseBox_tnciw_7",pt="_chooseIcon_tnciw_11",_t="_fileList_tnciw_25",xt="_singleFile_tnciw_37",Nt="_fileIcon_tnciw_48";var L={choosed:ft,chooseBox:St,chooseIcon:pt,fileList:_t,singleFile:xt,fileIcon:Nt};const D=t=>{const[i,d]=r.exports.useState(!1),[h,o]=r.exports.useState(t.dir),[u,S]=r.exports.useState([]),[m,g]=r.exports.useState(""),p=f=>{const x={dir:`/${n.currentEditGame}/game/${f}`};k.post(`${n.domain}/api/editGame/getAssets/`,x).then(E=>{S(E.data)}).catch(E=>{console.log(E)})},v=f=>{let l=f.split("/");f="";let x=0;for(const E of l)E!==t.dir&&(x!==0&&(f=f+"/"),x++,f=f+E);return f},_=f=>{let l=h+"/"+f;l=v(l),t.set(l),t.hasOwnProperty("setShow")&&t.setShow(l)};r.exports.useEffect(()=>{p(h)},[]);let N=[];for(const f of u){let l=!0,x=!0;f.match(/\.json/)&&(x=!1),f.match(/\./)&&(l=!1);let E=e("div",{children:""});l?E=s("div",{className:L.singleFile,onClick:()=>{const F=h+"/"+f;o(F),p(F)},children:[e(Z,{theme:"outline",size:"18",fill:"#333",className:L.fileIcon}),f]},f):E=s("div",{className:L.singleFile,onClick:()=>{g(v(h+"/"+f)),_(f),d(!i)},children:[e(Se,{theme:"outline",size:"18",fill:"#333",className:L.fileIcon}),f]},f),x&&N.push(E)}return s("div",{children:[e("div",{className:L.chooseBox,children:s("div",{className:L.chooseIcon,onClick:()=>{i===!1&&(o(t.dir),g(""),p(t.dir)),d(!i)},children:[e(pe,{theme:"outline",size:"16",fill:"#333"})," \u9009\u62E9\u6587\u4EF6"]})}),e("div",{style:{position:"relative"},children:i&&e("div",{className:L.fileList,children:N})})]})},vt=()=>{r.exports.useState(!1);const[t,i]=r.exports.useState(""),[d,h]=r.exports.useState(""),[o,u]=r.exports.useState(""),S=()=>{k.get(`${n.domain}/Games/${n.currentEditGame}/game/gameConfig.json`).then(_=>{let N=_.data;n.currentGameConfig=_.data,document.getElementById("gameNameInput").value=N.Game_name,i(N.Title_bgm),h(N.Title_img),u(N.Loading_img)})},m=()=>{n.currentGameConfig.Game_name=document.getElementById("gameNameInput").value,v()},g=(_,N)=>{n.currentGameConfig[_]=N,v()},p=_=>N=>{g(_,N)},v=()=>{let _={currentEditGame:n.currentEditGame,config:n.currentGameConfig};k.post(`${n.domain}/api/manageGame/config`,_).then(N=>{})};return r.exports.useEffect(()=>{S()},[]),s("div",{style:{width:"100%"},children:[e("div",{children:e("a",{style:{color:"black",textDecoration:"none"},href:`${n.domain}/Games/${n.currentEditGame}`,target:"_blank",children:s("div",{className:T.previewGameButton,children:[e(_e,{theme:"outline",size:"24",fill:"#FFF",style:{padding:"0 5px 0 0",transform:"translate(0,5px)"}}),"\u5728\u65B0\u6807\u7B7E\u9875\u9884\u89C8\u6E38\u620F"]})})}),s("div",{children:[e("div",{className:T.title,children:"\u6E38\u620F\u540D\u79F0"}),e("div",{children:e("input",{onBlur:m,id:"gameNameInput",className:T.gameNameInput})})]}),s("div",{children:[e("div",{className:T.title,children:"\u6807\u9898\u80CC\u666F\u97F3\u4E50"}),s("div",{children:[t,e(D,{setShow:i,id:"bgmPicker",dir:"bgm",set:p("Title_bgm")})]})]}),s("div",{children:[e("div",{className:T.title,children:"\u6807\u9898\u80CC\u666F"}),s("div",{children:[d,e(D,{setShow:h,id:"bgPicker",dir:"background",set:p("Title_img")})]})]})]})},Ct="_main_z7pjj_2",Et="_dirButtonContainer_z7pjj_8",Bt="_icon_small_z7pjj_14",wt="_controlPanel_z7pjj_21",Ft="_upload_z7pjj_25",At="_dirButton_z7pjj_8",kt="_fileElement_z7pjj_47",It="_title_z7pjj_64",Dt="_currentDirShow_z7pjj_74",bt="_panelButton_z7pjj_84",yt="_uploadTitle_z7pjj_96",Pt="_uploadButton_z7pjj_104";var B={main:Ct,dirButtonContainer:Et,icon_small:Bt,controlPanel:wt,upload:Ft,dirButton:At,fileElement:kt,title:It,currentDirShow:Dt,panelButton:bt,uploadTitle:yt,uploadButton:Pt};const le={background:"\u80CC\u666F",bgm:"\u97F3\u4E50",figure:"\u7ACB\u7ED8",video:"\u89C6\u9891",vocal:"\u8BED\u97F3"},re=t=>{let i=e(Z,{theme:"outline",size:"22",fill:"#333"});switch(t.icon){case"background":i=e(W,{theme:"outline",size:"22",fill:"#333"});break;case"bgm":i=e(U,{theme:"outline",size:"22",fill:"#333"});break;case"figure":i=e(R,{theme:"outline",size:"22",fill:"#333"});break;case"video":i=e(j,{theme:"outline",size:"22",fill:"#333"});break;case"vocal":i=e(Ne,{theme:"outline",size:"22",fill:"#333"});break;case"file":i=e(xe,{theme:"outline",size:"22",fill:"#333"})}return i},zt=()=>{const[t,i]=r.exports.useState(!0),[d,h]=r.exports.useState(!1),[o,u]=r.exports.useState(!1);r.exports.useEffect(()=>{c.set("refAssetsManagement",t),c.connect("refAssetsManagement",()=>{i(c.get("refAssetsManagement"))},"refAssetsManagement"),S()},[]);const S=()=>{const l=n.currentEditGame,x=n.currentDir,E={dir:`/${l}/game/${x}`};k.post(`${n.domain}/api/editGame/getAssets/`,E).then(F=>{n.currentDirContent=F.data,c.set("refAssetsManagement",!c.get("refAssetsManagement"))}).catch(F=>{console.log(F)})},m=()=>{if(n.currentDir==="")return;let l=n.currentDir.split("/");l.pop(),n.currentDir=l.reduce((x,E)=>""+x+"/"+E),S()},g=l=>{n.currentDir=n.currentDir+`/${l}`,S()},p=()=>{const l=n.currentEditGame,x=n.currentDir,E=`/${l}/game/${x}`;let F=new FormData;F.append("dir",E);const M=document.getElementById("uploadFile").files[0];let G=document.getElementById("uploadFile").value;F.append("file",M,G),k.post(`${n.domain}/api/editGame/addAsset/`,F,{headers:{"Content-Type":"multipart/form-data"}}).then(X=>{h(!1),S()}).catch(X=>{console.log(X)})},v=()=>{const l=n.currentEditGame,x=n.currentDir,E=`/${l}/game/${x}`,F=document.getElementById("addDirInput").value,M={current:E,Name:F};k.post(`${n.domain}/api/editGame/mkdir/`,M).then(G=>{u(!1),S()}).catch(G=>{console.log(G)})},_=()=>{h(!d)},N=()=>{u(!o)},f=[];for(const l of n.currentDirContent){let x="",E=!0;if(l.match(/\./))n.currentDir===""&&(E=!1),x=s("div",{className:B.fileElement,children:[e("span",{className:B.icon_small,children:e(re,{icon:"file"})}),l]},l);else{let F=l;n.currentDir===""&&le.hasOwnProperty(l)&&(F=le[l]),x=s("div",{className:B.dirButton,onClick:()=>g(l),children:[e("span",{className:B.icon_small,children:e(re,{icon:l})}),F]},l),l==="scene"&&n.currentDir===""&&(E=!1)}E&&f.push(x)}return s("div",{className:B.main,children:[n.currentDir!==""&&e("div",{className:B.currentDirShow,children:n.currentDir}),n.currentDir!==""&&s("div",{className:B.controlPanel,children:[e("div",{children:e(ve,{theme:"outline",size:"24",fill:"#333",onClick:m,className:B.panelButton})}),s("div",{children:[e(Ce,{theme:"outline",size:"24",fill:"#333",onClick:_,className:B.panelButton}),d&&s("div",{className:B.upload,children:[e("div",{className:B.uploadTitle,children:"\u4E0A\u4F20\u6587\u4EF6"}),e("input",{id:"uploadFile",type:"file"}),e("div",{className:B.uploadButton,onClick:p,children:"\u4E0A\u4F20"})]})]}),s("div",{children:[e(Ee,{theme:"outline",size:"24",fill:"#333",onClick:N,className:B.panelButton}),o&&s("div",{className:B.upload,children:[e("div",{className:B.uploadTitle,children:"\u65B0\u5EFA\u6587\u4EF6\u5939"}),e("input",{id:"addDirInput"}),e("div",{className:B.uploadButton,onClick:v,children:"\u65B0\u5EFA"})]})]})]}),e("div",{}),e("div",{className:B.dirButtonContainer,children:f})]})},Lt="_main_1dzb8_1",Tt="_addInput_1dzb8_12",Gt="_title_1dzb8_20",Ot="_addButton_1dzb8_26";var $={main:Lt,addInput:Tt,title:Gt,addButton:Ot};const $t=t=>{const i=()=>{const d={gameName:n.currentEditGame,sceneName:document.getElementById("addSceneName").value};k.post(`${n.domain}/api/editGame/addNewScene/`,d).then(h=>{t.added()}).catch(h=>{console.log(h)})};return s("div",{className:$.main,children:[s("div",{className:$.title,children:["\u573A\u666F\u540D\u79F0\uFF1A",e("input",{className:$.addInput,id:"addSceneName"})]}),e("div",{className:$.addButton,onClick:i,children:"\u65B0\u5EFA\u573A\u666F"})]})},Mt="_titleText_1j8ez_1",jt="_scene_1j8ez_11",Rt="_newSceneButton_1j8ez_22",Ut="_sceneList_1j8ez_30";var q={titleText:Mt,scene:jt,newSceneButton:Rt,sceneList:Ut};const J=()=>{n.currentEditScene!==""&&(n.sceneScrollTop[n.currentEditScene]=document.getElementById("currentSentenceList").scrollTop)},Wt=()=>{const[t,i]=r.exports.useState([]),[d,h]=r.exports.useState(!1),o=()=>{const v={dir:`/${n.currentEditGame}/game/scene`};k.post(`${n.domain}/api/editGame/getAssets/`,v).then(_=>{i(_.data)}).catch(_=>{console.log(_)})},u=()=>{o(),h(!d)};r.exports.useEffect(()=>{o()},[]);const S=g=>{n.currentOpendSceneEdit.includes(g)||n.currentOpendSceneEdit.push(g),J(),n.currentEditScene=g,c.set("updateEditor",!c.get("updateEditor"))},m=[];for(const g of t){let p=!1,v=g.split(".");v[v.length-1]==="json"&&(p=!0);const _=s("div",{className:q.scene,onClick:()=>S(g),children:[e(O,{theme:"outline",size:"16",fill:"#333",style:{padding:"0 5px 0 0"}}),g]},g);p&&m.push(_)}return s("div",{style:{width:"100%"},children:[s("div",{className:q.newSceneButton,onClick:()=>{h(!d)},children:[e(Y,{theme:"outline",size:"18",fill:"#333",style:{padding:"0 5px 0 0",transform:"translate(0,2px)"}}),"\u65B0\u5EFA\u573A\u666F"]}),e("div",{children:d&&e($t,{added:u})}),e("div",{className:q.sceneList,children:m})]})},Vt=()=>{const t=["\u6E38\u620F\u914D\u7F6E","\u7D20\u6750\u7BA1\u7406","\u573A\u666F\u7BA1\u7406"],[i,d]=r.exports.useState(!1);r.exports.useEffect(()=>{c.set("refSideBar",i),c.connect("refSideBar",()=>{d(c.get("refSideBar"))},"refSideBarFunc")},[]);const h=[];for(const m of t){let g="#333";m===n.editorTag?(A.optionMarker,g="#8e354a"):A.optionMarkerOff;let p=e(we,{theme:"outline",size:"14",fill:g});m==="\u7D20\u6750\u7BA1\u7406"&&(p=e(Fe,{theme:"outline",size:"14",fill:g})),m==="\u573A\u666F\u7BA1\u7406"&&(p=e(O,{theme:"outline",size:"14",fill:g}));const v=e("div",{className:m===n.editorTag?A.tagButton+" "+A.tagButtonOn:A.tagButton,onClick:()=>{n.editorTag=m,c.set("refSideBar",!c.get("refSideBar"))},children:s("div",{children:[p,e("span",{style:{margin:"0 5px 0 0 "}}),m]})},m);h.push(v)}let o;switch(n.editorTag){case"\u6E38\u620F\u914D\u7F6E":o=e(vt,{});break;case"\u7D20\u6750\u7BA1\u7406":o=e(zt,{});break;case"\u573A\u666F\u7BA1\u7406":o=e(Wt,{});break}function u(m){n.isRealtimeRefreashPreview=m}function S(){const m=document.getElementById("gamePreviewIframe");m.src="",m.src=`${n.domain}/Games/${n.currentEditGame}`}return s("aside",{className:A.aside,children:[s("div",{className:A.asidePreviewControlBar,children:[e("div",{className:A.asidePreviewControlBar_single,children:e("span",{style:{fontSize:"large",fontWeight:"bold",color:"#8E354A"},children:"\u6E38\u620F\u9884\u89C8"})}),s("div",{id:"refPreviewButton",className:A.asidePreviewControlBar_button,onClick:S,children:[e(Be,{style:{transform:"translate(0,0)",margin:"0 3px 0 0 "},theme:"outline",size:"16",fill:"#000",strokeWidth:3}),"\u5237\u65B0"]}),s("div",{className:A.asidePreviewControlBar_single,children:["\u5B9E\u65F6\u66F4\u65B0",e("span",{style:{margin:"0 10px 0 0 "}}),e(z,{defaultChecked:!0,onChange:u,size:"small"})]})]}),e("iframe",{id:"gamePreviewIframe",frameBorder:"0",className:A.previewWindow,src:`${n.domain}/Games/${n.currentEditGame}`}),s("div",{className:A.sideBarMain,children:[e("div",{className:A.option,children:h}),e("div",{className:A.sideBarContent,children:o})]})]})},qt="_main_r7n8t_1";var Jt={main:qt};const Kt="_main_1ajtj_1",Ht="_tag_1ajtj_8",Qt="_tagOpened_1ajtj_18",Xt="_tagList_1ajtj_25",Yt="_tagIcon_1ajtj_30",Zt="_closeIcon_1ajtj_35";var b={main:Kt,tag:Ht,tagOpened:Qt,tagList:Xt,tagIcon:Yt,closeIcon:Zt};const en="_topButtonList_k9m8n_1",tn="_topButton_k9m8n_1",nn="_addSentencePanel_k9m8n_23",sn="_addSentenceButton_k9m8n_32",an="_sentenceList_k9m8n_42",cn="_sentence_k9m8n_42",on="_sentenceIn_k9m8n_1",dn="_lineNumber_k9m8n_55",ln="_sentenceMain_k9m8n_65";var C={topButtonList:en,topButton:tn,addSentencePanel:nn,addSentenceButton:sn,sentenceList:an,sentence:cn,sentenceIn:on,lineNumber:dn,sentenceMain:ln};const rn=t=>{let i;switch(t){case"dialog":i={type:t,speaker:"",content:"",vocal:"",ignoreSpeaker:!1};break;case"bg":i={type:t,bg:"",noBg:!1,next:!1};break;case"bgm":i={type:t,bgm:"",noBgm:!1};break;case"changeScene":i={type:t,newScene:""};break;case"video":i={type:t,video:""};break;case"changeP":i={type:t,newP:"",next:!1,noP:!1,pos:""};break;case"choose":i={type:t,chooseItem:[{text:"\u5728\u6B64\u586B\u5165\u5206\u652F\u7684\u540D\u79F0",scene:""},{text:"\u5728\u6B64\u586B\u5165\u5206\u652F\u7684\u540D\u79F0",scene:""}]};break;case"intro":i={type:t,content:[]};break}return i},un="_sentence_1xs48_1",mn="_dialog_input_1xs48_7",hn="_singleOption_1xs48_14",gn="_optionTitle_1xs48_22",fn="_dialog_edit_title_1xs48_29",Sn="_optionContent_1xs48_34",pn="_isolate_1xs48_38",_n="_sentenceButtonList_1xs48_43",xn="_sentenceButton_1xs48_43",Nn="_sentenceIndexShow_1xs48_63",vn="_barContainer_1xs48_77",Cn="_mainEdit_1xs48_87",En="_topContainer_1xs48_95";var a={sentence:un,dialog_input:mn,singleOption:hn,optionTitle:gn,dialog_edit_title:fn,optionContent:Sn,isolate:pn,sentenceButtonList:_n,sentenceButton:xn,sentenceIndexShow:Nn,barContainer:vn,mainEdit:Cn,topContainer:En};const Bn=t=>{n.currentSceneSentenceList.splice(t,1),c.set("writeScene",!c.get("writeScene"))},ue=(t,i)=>{if(!(t===0&&i===-1||t===n.currentSceneSentenceList.length-1&&i===1)){{const d=n.currentSceneSentenceList[t];n.currentSceneSentenceList.splice(t,1),n.currentSceneSentenceList.splice(t+i,0,d)}c.set("writeScene",!c.get("writeScene"))}},me=t=>s("div",{className:C.addSentencePanel,children:[s("div",{className:C.addSentenceButton,onClick:()=>{w("dialog",t.index)},children:[e(ee,{theme:"outline",size:"18",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u6DFB\u52A0\u5BF9\u8BDD"]}),s("div",{className:C.addSentenceButton,onClick:()=>{w("changeP",t.index)},children:[e(R,{theme:"outline",size:"18",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u5207\u6362\u7ACB\u7ED8"]}),s("div",{className:C.addSentenceButton,onClick:()=>{w("bg",t.index)},children:[e(W,{theme:"outline",size:"18",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u5207\u6362\u80CC\u666F"]}),s("div",{className:C.addSentenceButton,onClick:()=>{w("changeScene",t.index)},children:[e(te,{theme:"outline",size:"18",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u573A\u666F\u8DF3\u8F6C"]}),s("div",{className:C.addSentenceButton,onClick:()=>{w("choose",t.index)},children:[e(ne,{theme:"outline",size:"18",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u5206\u652F\u9009\u62E9"]}),s("div",{className:C.addSentenceButton,onClick:()=>{w("bgm",t.index)},children:[e(U,{theme:"outline",size:"18",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u80CC\u666F\u97F3\u4E50"]}),s("div",{className:C.addSentenceButton,onClick:()=>{w("video",t.index)},children:[e(j,{theme:"outline",size:"18",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u63D2\u5165\u89C6\u9891"]}),s("div",{className:C.addSentenceButton,onClick:()=>{w("intro",t.index)},children:[e(se,{theme:"outline",size:"18",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u9ED1\u5C4F\u6587\u5B57"]})]}),y=t=>s("div",{className:a.sentenceButtonList,children:[s("div",{className:a.sentenceButton,onClick:()=>{Bn(t.index)},children:[e(Ae,{theme:"outline",size:"14",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u5220\u9664\u672C\u53E5"]}),s("div",{onClick:()=>{ue(t.index,-1)},className:a.sentenceButton,children:[e(ke,{theme:"outline",size:"14",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u4E0A\u79FB\u672C\u53E5"]}),s("div",{onClick:()=>{ue(t.index,1)},className:a.sentenceButton,children:[e(Ie,{theme:"outline",size:"14",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u4E0B\u79FB\u672C\u53E5"]}),s("div",{onClick:()=>{t.data.setShowAddPre(!t.data.showAddPre)},className:a.sentenceButton,children:[e(ie,{theme:"outline",size:"14",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u5728\u672C\u53E5\u524D\u63D2\u5165\u53E5\u5B50",t.data.showAddPre&&e(me,{index:t.data.indexPre})]}),s("div",{onClick:()=>{t.data.setShowAddAfter(!t.data.showAddAfter)},className:a.sentenceButton,children:[e(ie,{theme:"outline",size:"14",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u5728\u672C\u53E5\u540E\u63D2\u5165\u53E5\u5B50",t.data.showAddAfter&&e(me,{index:t.data.indexAfter})]})]}),P=t=>{const i=n.wsConn;n.isRealtimeRefreashPreview&&setTimeout(()=>{i.send(`jmp ${n.currentEditScene} ${t}`)},500)},wn=t=>{const i=()=>P(t.index),[d,h]=r.exports.useState(!1),[o,u]=r.exports.useState(!1),S=t.index,m=t.index+1,g={showAddPre:d,setShowAddPre:h,showAddAfter:o,setShowAddAfter:u,indexPre:S,indexAfter:m};r.exports.useEffect(()=>{document.getElementById("speakerInput"+t.index).value=t.data.speaker,document.getElementById("contentInput"+t.index).value=t.data.content});const p=()=>{n.currentSceneSentenceList[t.index].speaker=document.getElementById("speakerInput"+t.index).value,n.currentSceneSentenceList[t.index].content=document.getElementById("contentInput"+t.index).value,c.set("writeScene",!c.get("writeScene")),i()},v=l=>{n.currentSceneSentenceList[t.index].ignoreSpeaker=l,c.set("writeScene",!c.get("writeScene")),i()},[_,N]=r.exports.useState(t.data.vocal),f=()=>l=>{n.currentSceneSentenceList[t.index].vocal=l,c.set("writeScene",!c.get("writeScene")),i()};return s("div",{className:a.sentence,children:[s("div",{className:a.topContainer,children:[e("div",{className:a.sentenceIndexShow,children:"\u57FA\u672C\u5BF9\u8BDD"}),e("div",{className:a.barContainer,children:e(y,{index:t.index,data:g})})]}),s("main",{className:a.mainEdit,children:[s("div",{className:a.singleOption,children:[e("span",{className:a.dialog_edit_title,children:"\u89D2\u8272\uFF1A"}),e("input",{className:a.dialog_input,onBlur:p,id:"speakerInput"+t.index}),e("span",{style:{padding:"0 0 0 5px"},children:"\u63D0\u793A\uFF1A\u7559\u7A7A\u53EF\u4EE5\u7EE7\u627F\u4E0A\u4E00\u6761\u5BF9\u8BDD\u7684\u89D2\u8272\u540D"})]}),s("div",{className:a.singleOption,children:[e("span",{className:a.dialog_edit_title,children:"\u5BF9\u8BDD\uFF1A"}),e("textarea",{className:a.dialog_input,onBlur:p,id:"contentInput"+t.index})]}),s("div",{className:a.singleOption,children:[e("span",{className:a.optionTitle,children:"\u65C1\u767D\u6A21\u5F0F"}),s("span",{className:a.optionContent,children:[e(z,{size:"small",id:"dialog_pbms",checked:t.data.ignoreSpeaker,onChange:v}),"\uFF08\u5C06\u4E0D\u4F1A\u663E\u793A\u89D2\u8272\u540D\uFF09"]}),e("div",{className:a.optionTitle,children:"\u914D\u97F3\u6587\u4EF6"}),e(D,{setShow:N,id:"vocalPicker",dir:"vocal",set:f()}),e("span",{className:a.optionContent,children:_})]})]})]},t.index+"dialog")},Fn=t=>{const i=()=>P(t.index),[d,h]=r.exports.useState(!1),[o,u]=r.exports.useState(!1),S=t.index,m=t.index+1,g={showAddPre:d,setShowAddPre:h,showAddAfter:o,setShowAddAfter:u,indexPre:S,indexAfter:m};r.exports.useEffect(()=>{});const p=l=>{n.currentSceneSentenceList[t.index].noBg=l,c.set("writeScene",!c.get("writeScene")),i()},v=l=>{n.currentSceneSentenceList[t.index].next=l,c.set("writeScene",!c.get("writeScene")),i()},[_,N]=r.exports.useState(t.data.bg),f=()=>l=>{n.currentSceneSentenceList[t.index].bg=l,c.set("writeScene",!c.get("writeScene")),i()};return s("div",{className:a.sentence,children:[s("div",{className:a.topContainer,children:[e("div",{className:a.sentenceIndexShow,children:"\u66F4\u6539\u80CC\u666F"}),e("div",{className:a.barContainer,children:e(y,{index:t.index,data:g})})]}),s("main",{className:a.mainEdit,children:[s("div",{className:a.singleOption,children:[e("span",{className:a.optionTitle,children:"\u5173\u95ED\u80CC\u666F"}),s("span",{className:a.optionContent,children:[e(z,{size:"small",checked:t.data.noBg,id:"bg_none"+t.index,onChange:p}),"\uFF08\u5C06\u5173\u95ED\u80CC\u666F\uFF09"]}),e("span",{className:a.optionTitle,children:"\u66F4\u6539\u80CC\u666F\u540E\u7EE7\u7EED\u4E0B\u4E00\u53E5"}),e("span",{className:a.optionContent,children:e(z,{size:"small",id:"bg_next"+t.index,checked:t.data.next,onChange:v})})]}),s("div",{className:a.singleOption,children:[e("span",{className:a.optionTitle,children:"\u80CC\u666F\u6587\u4EF6"}),e(D,{setShow:N,id:"bgPicker",dir:"background",set:f()}),e("span",{className:a.optionContent,children:_})]})]})]},t.index+"bg")},An=t=>{const i=()=>P(t.index),[d,h]=r.exports.useState(!1),[o,u]=r.exports.useState(!1),S=t.index,m=t.index+1,g={showAddPre:d,setShowAddPre:h,showAddAfter:o,setShowAddAfter:u,indexPre:S,indexAfter:m};r.exports.useEffect(()=>{});const p=f=>{n.currentSceneSentenceList[t.index].noBgm=f,c.set("writeScene",!c.get("writeScene")),i()},[v,_]=r.exports.useState(t.data.bgm),N=()=>f=>{n.currentSceneSentenceList[t.index].bgm=f,c.set("writeScene",!c.get("writeScene")),i()};return s("div",{className:a.sentence,children:[s("div",{className:a.topContainer,children:[e("div",{className:a.sentenceIndexShow,children:"\u66F4\u6539\u97F3\u4E50"}),e("div",{className:a.barContainer,children:e(y,{index:t.index,data:g})})]}),s("main",{className:a.mainEdit,children:[s("div",{className:a.singleOption,children:[e("span",{className:a.optionTitle,children:"\u5173\u95ED\u80CC\u666F\u97F3\u4E50"}),s("span",{className:a.optionContent,children:[e(z,{size:"small",id:"bgm_none"+t.index,checked:t.data.noBgm,onChange:p}),"\uFF08\u5C06\u5173\u95ED\u80CC\u666F\u97F3\u4E50\uFF09"]})]}),s("div",{className:a.singleOption,children:[e("span",{className:a.optionTitle,children:"\u80CC\u666F\u97F3\u4E50\u6587\u4EF6"}),e(D,{setShow:_,id:"bgmPicker",dir:"bgm",set:N()}),e("span",{className:a.optionContent,children:v})]})]})]},t.index+"bgm")},kn=t=>{const i=()=>P(t.index),[d,h]=r.exports.useState(!1),[o,u]=r.exports.useState(!1),S=t.index,m=t.index+1,g={showAddPre:d,setShowAddPre:h,showAddAfter:o,setShowAddAfter:u,indexPre:S,indexAfter:m};r.exports.useEffect(()=>{});const[p,v]=r.exports.useState(t.data.newScene),_=()=>N=>{n.currentSceneSentenceList[t.index].newScene=N,c.set("writeScene",!c.get("writeScene")),i()};return s("div",{className:a.sentence,children:[s("div",{className:a.topContainer,children:[e("div",{className:a.sentenceIndexShow,children:"\u5207\u6362\u573A\u666F"}),e("div",{className:a.barContainer,children:e(y,{index:t.index,data:g})})]}),e("main",{className:a.mainEdit,children:s("div",{className:a.singleOption,children:[e("span",{className:a.optionTitle,children:"\u65B0\u573A\u666F"}),e(D,{setShow:v,id:"scenePicker",dir:"scene",set:_()}),e("span",{className:a.optionContent,children:p})]})})]},t.index+"scene")},In=t=>{const i=()=>P(t.index),[d,h]=r.exports.useState(!1),[o,u]=r.exports.useState(!1),S=t.index,m=t.index+1,g={showAddPre:d,setShowAddPre:h,showAddAfter:o,setShowAddAfter:u,indexPre:S,indexAfter:m};r.exports.useEffect(()=>{});const[p,v]=r.exports.useState(t.data.video),_=()=>N=>{n.currentSceneSentenceList[t.index].video=N,c.set("writeScene",!c.get("writeScene")),i()};return s("div",{className:a.sentence,children:[s("div",{className:a.topContainer,children:[e("div",{className:a.sentenceIndexShow,children:"\u64AD\u653E\u89C6\u9891"}),e("div",{className:a.barContainer,children:e(y,{index:t.index,data:g})})]}),e("main",{className:a.mainEdit,children:s("div",{className:a.singleOption,children:[e("span",{className:a.optionTitle,children:"\u89C6\u9891\u6587\u4EF6"}),e(D,{setShow:v,id:"videoPicker",dir:"video",set:_()}),e("span",{className:a.optionContent,children:p})]})})]},t.index+"scene")},{Option:K}=ae,Dn=t=>{const i=()=>P(t.index),[d,h]=r.exports.useState(!1),[o,u]=r.exports.useState(!1),S=t.index,m=t.index+1,g={showAddPre:d,setShowAddPre:h,showAddAfter:o,setShowAddAfter:u,indexPre:S,indexAfter:m};r.exports.useEffect(()=>{});const p=x=>{n.currentSceneSentenceList[t.index].noP=x,c.set("writeScene",!c.get("writeScene")),i()},v=x=>{n.currentSceneSentenceList[t.index].next=x,c.set("writeScene",!c.get("writeScene")),i()},[_,N]=r.exports.useState(t.data.newP),f=()=>x=>{n.currentSceneSentenceList[t.index].newP=x,c.set("writeScene",!c.get("writeScene")),i()},l=x=>{n.currentSceneSentenceList[t.index].pos=x,c.set("writeScene",!c.get("writeScene")),i()};return s("div",{className:a.sentence,children:[s("div",{className:a.topContainer,children:[e("div",{className:a.sentenceIndexShow,children:"\u5207\u6362\u7ACB\u7ED8"}),e("div",{className:a.barContainer,children:e(y,{index:t.index,data:g})})]}),s("main",{className:a.mainEdit,children:[s("div",{className:a.singleOption,children:[e("span",{className:a.optionTitle,children:"\u5173\u95ED\u7ACB\u7ED8"}),e("span",{className:a.optionContent,children:e(z,{size:"small",id:"p_none",checked:t.data.noP,onChange:p})}),e("span",{className:a.optionContent,children:"\uFF08\u5C06\u5173\u95ED\u7ACB\u7ED8\uFF09"}),e("span",{className:a.optionTitle,children:"\u7ACB\u7ED8\u4F4D\u7F6E"}),s(ae,{size:"small",defaultValue:t.data.pos,style:{width:120},onChange:l,children:[e(K,{value:"left",children:"\u5DE6"}),e(K,{value:"",children:"\u4E2D"}),e(K,{value:"right",children:"\u53F3"})]}),e("span",{className:a.optionContent,children:"\uFF08\u6539\u53D8\u7ACB\u7ED8\u7684\u4F4D\u7F6E\uFF09"})]}),s("div",{className:a.singleOption,children:[e("span",{className:a.optionTitle,children:"\u5207\u6362\u540E\u6267\u884C\u4E0B\u4E00\u6761\u8BED\u53E5"}),e("span",{className:a.optionContent,children:e(z,{size:"small",id:"p_none",checked:t.data.next,onChange:v})})]}),s("div",{className:a.singleOption,children:[e("span",{className:a.optionTitle,children:"\u7ACB\u7ED8\u6587\u4EF6"}),e(D,{setShow:N,id:"pPicker",dir:"figure",set:f()}),e("span",{className:a.optionContent,children:_})]})]})]},t.index+"dialog")},bn=t=>{const i=()=>P(t.index),[d,h]=r.exports.useState(!1),[o,u]=r.exports.useState(!1),S=t.index,m=t.index+1,g={showAddPre:d,setShowAddPre:h,showAddAfter:o,setShowAddAfter:u,indexPre:S,indexAfter:m};r.exports.useEffect(()=>{for(let l=0;l<t.data.chooseItem.length;l++)document.getElementById("chooseInput"+t.index+"itemIndex"+l).value=t.data.chooseItem[l].text});const p=()=>{n.currentSceneSentenceList[t.index].chooseItem.push({text:"\u5728\u6B64\u586B\u5165\u5206\u652F\u7684\u540D\u79F0",scene:""}),c.set("writeScene",!c.get("writeScene")),i()},v=l=>{const x=parseInt(l.split("Index")[1]);console.log(x),n.currentSceneSentenceList[t.index].chooseItem[x].text=document.getElementById(l).value,c.set("writeScene",!c.get("writeScene")),i()},_=l=>x=>{n.currentSceneSentenceList[t.index].chooseItem[l].scene=x,c.set("writeScene",!c.get("writeScene")),i()};let N=[],f=0;for(const l of t.data.chooseItem){const x="chooseInput"+t.index+"itemIndex"+f;let E=s("div",{className:a.singleOption,children:[e("span",{className:a.optionTitle,children:"\u5206\u652F\u540D\u79F0"}),e("input",{className:a.dialog_input,style:{width:"200px"},onBlur:()=>{v(x)},id:x}),e("span",{className:a.optionContent,children:e(De,{theme:"outline",size:"24",fill:"#333"})}),e("span",{className:a.optionTitle,children:"\u8DF3\u8F6C\u7684\u573A\u666F"}),e(D,{id:"scenePicker",dir:"scene",set:_(f)}),e("span",{className:a.optionContent,children:l.scene})]},f);N.push(E),f++}return s("div",{className:a.sentence,children:[s("div",{className:a.topContainer,children:[e("div",{className:a.sentenceIndexShow,children:"\u5206\u652F\u9009\u62E9"}),e("div",{className:a.barContainer,children:e(y,{index:t.index,data:g})})]}),s("main",{className:a.mainEdit,children:[e("div",{style:{display:"flex",padding:"5px 0 0 0"},children:s("div",{onClick:p,className:a.sentenceButton,children:[e(ce,{theme:"outline",size:"16",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u6DFB\u52A0\u5206\u652F"]})}),N]})]},t.index+"choose")},yn=t=>{const i=()=>P(t.index),[d,h]=r.exports.useState(!1),[o,u]=r.exports.useState(!1),S=t.index,m=t.index+1,g={showAddPre:d,setShowAddPre:h,showAddAfter:o,setShowAddAfter:u,indexPre:S,indexAfter:m};r.exports.useEffect(()=>{for(let f=0;f<t.data.content.length;f++)document.getElementById("introInput"+t.index+"itemIndex"+f).value=t.data.content[f]});const p=()=>{n.currentSceneSentenceList[t.index].content.push("\u5728\u6B64\u586B\u5165\u8981\u5C55\u793A\u7684\u6587\u5B57"),c.set("writeScene",!c.get("writeScene")),i()},v=f=>{const l=parseInt(f.split("Index")[1]);console.log(l),n.currentSceneSentenceList[t.index].content[l]=document.getElementById(f).value,c.set("writeScene",!c.get("writeScene")),i()};let _=[],N=0;for(const f of t.data.content){const l="introInput"+t.index+"itemIndex"+N;let x=s("div",{className:a.singleOption,children:[e("span",{className:a.optionTitle,children:"\u663E\u793A\u6587\u5B57"}),e("input",{className:a.dialog_input,style:{width:"200px"},onBlur:()=>{v(l)},id:l})]},N);_.push(x),N++}return s("div",{className:a.sentence,children:[s("div",{className:a.topContainer,children:[e("div",{className:a.sentenceIndexShow,children:"\u9ED1\u5C4F\u6587\u5B57"}),e("div",{className:a.barContainer,children:e(y,{index:t.index,data:g})})]}),s("main",{className:a.mainEdit,children:[e("div",{style:{display:"flex",padding:"5px 0 0 0"},children:s("div",{onClick:p,className:a.sentenceButton,children:[e(ce,{theme:"outline",size:"16",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u6DFB\u52A0\u6587\u5B57"]})}),_]})]},t.index+"intro")},Pn=(t,i)=>{let d;switch(t.type){case"dialog":d=e(wn,{data:t,index:i},i);break;case"bg":d=e(Fn,{data:t,index:i},i);break;case"bgm":d=e(An,{data:t,index:i},i);break;case"changeScene":d=e(kn,{data:t,index:i},i);break;case"video":d=e(In,{data:t,index:i},i);break;case"changeP":d=e(Dn,{data:t,index:i},i);break;case"choose":d=e(bn,{data:t,index:i},i);break;case"intro":d=e(yn,{data:t,index:i},i);break}return d};const zn=t=>{const[i,d]=r.exports.useState(!0),[h,o]=r.exports.useState(!1);r.exports.useEffect(()=>{c.set("updateScene",i),c.connect("updateScene",()=>{d(c.get("updateScene"))},"updateSceneFunc"),c.set("refScene",!0),c.connect("refScene",()=>{H()},"refSceneFunc"),c.get("writeScene")===void 0&&c.set("writeScene",!0),c.connect("writeScene",()=>{Q()},"writeSceneFunc"),H(),n.sceneScrollTop.hasOwnProperty(n.currentEditScene)&&setTimeout(()=>{document.getElementById("currentSentenceList").scrollTop=n.sceneScrollTop[n.currentEditScene]},0)},[]);let u=[];const S=JSON.parse(JSON.stringify(n.currentSceneSentenceList));for(let g=0;g<S.length;g++){const p=S[g],v=Pn(p,g),_=s("div",{className:C.sentence,children:[e("div",{className:C.lineNumber,children:g+1}),e("div",{className:C.sentenceMain,children:v})]},"sentence"+g);u.push(_)}const m=s("div",{className:C.addSentencePanel,children:[s("div",{className:C.addSentenceButton,onClick:()=>{w("dialog"),o(!1)},children:[e(ee,{theme:"outline",size:"18",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u6DFB\u52A0\u5BF9\u8BDD"]}),s("div",{className:C.addSentenceButton,onClick:()=>{w("changeP"),o(!1)},children:[e(R,{theme:"outline",size:"18",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u5207\u6362\u7ACB\u7ED8"]}),s("div",{className:C.addSentenceButton,onClick:()=>{w("bg"),o(!1)},children:[e(W,{theme:"outline",size:"18",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u5207\u6362\u80CC\u666F"]}),s("div",{className:C.addSentenceButton,onClick:()=>{w("changeScene"),o(!1)},children:[e(te,{theme:"outline",size:"18",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u573A\u666F\u8DF3\u8F6C"]}),s("div",{className:C.addSentenceButton,onClick:()=>{w("choose"),o(!1)},children:[e(ne,{theme:"outline",size:"18",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u5206\u652F\u9009\u62E9"]}),s("div",{className:C.addSentenceButton,onClick:()=>{w("bgm"),o(!1)},children:[e(U,{theme:"outline",size:"18",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u80CC\u666F\u97F3\u4E50"]}),s("div",{className:C.addSentenceButton,onClick:()=>{w("video"),o(!1)},children:[e(j,{theme:"outline",size:"18",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u63D2\u5165\u89C6\u9891"]}),s("div",{className:C.addSentenceButton,onClick:()=>{w("intro"),o(!1)},children:[e(se,{theme:"outline",size:"18",fill:"#333",style:{padding:"0 5px 0 0"}}),"\u9ED1\u5C4F\u6587\u5B57"]})]});return s("div",{children:[s("div",{className:C.topButtonList,children:[e("div",{className:C.topButton,onClick:Q,children:"\u4FDD\u5B58\u573A\u666F"}),e("div",{className:C.topButton,onClick:()=>{o(!h)},children:"\u6DFB\u52A0\u8BED\u53E5"}),e("div",{children:h&&m})]}),e("div",{className:C.sentenceList,id:"currentSentenceList",children:u})]})};function H(){let t=n.currentEditScene;if(t==="")return;const i=`${n.domain}/Games/${n.currentEditGame}/game/scene/${t}`;k.get(i).then(d=>{n.currentSceneSentenceList=d.data,c.set("updateScene",!c.get("updateScene"))}).catch(d=>console.log(d))}function w(t,i){const d=rn(t);i!==void 0?n.currentSceneSentenceList.splice(i,0,d):n.currentSceneSentenceList.push(d),Q()}function Q(){const t=`${n.domain}/api/editGame/editScene/`,i={gameName:n.currentEditGame,sceneName:n.currentEditScene,sceneData:n.currentSceneSentenceList};k.post(t,i).then(d=>{H()}).catch(d=>console.log(d))}const Ln=()=>{const[t,i]=r.exports.useState(!1);r.exports.useEffect(()=>{c.set("updateEditor",t),c.connect("updateEditor",()=>{i(c.get("updateEditor")),c.set("refScene",!c.get("refScene"))},"updateEditorFunc")},[]);const d=u=>{J(),n.currentEditScene=u,c.set("updateEditor",!c.get("updateEditor")),c.set("refScene",!c.get("refScene"))},h=u=>{J();const S=n.currentOpendSceneEdit.indexOf(u);n.currentOpendSceneEdit.splice(S,1);const m=n.currentOpendSceneEdit.length===0;u===n.currentEditScene&&(m?n.currentEditScene="":n.currentOpendSceneEdit.length<=S?n.currentEditScene=n.currentOpendSceneEdit[n.currentOpendSceneEdit.length-1]:n.currentEditScene=n.currentOpendSceneEdit[S]),c.set("updateEditor",!c.get("updateEditor"))},o=[];for(const u of n.currentOpendSceneEdit){let S;u===n.currentEditScene?S=s("div",{className:b.tagOpened,children:[e(O,{theme:"outline",size:"20",fill:"#333",className:b.tagIcon}),u,e(oe,{theme:"outline",size:"20",fill:"#333",className:b.closeIcon,onClick:()=>{h(u)}})]},u):S=s("div",{className:b.tag,onClick:()=>{d(u)},children:[e(O,{theme:"outline",size:"20",fill:"#333",className:b.tagIcon}),u,e(oe,{theme:"outline",size:"20",fill:"#333",className:b.tagIcon,onClick:m=>{m.preventDefault(),m.stopPropagation(),h(u)}})]},u),o.push(S)}return s("div",{className:b.main,children:[e("div",{className:b.tagList,children:o}),e("div",{children:n.currentEditScene!==""&&e(zn,{sceneName:n.currentEditScene},n.currentEditScene)})]})},Tn=()=>{const[t,i]=r.exports.useState(!0);return r.exports.useEffect(()=>{c.set("updateEditor",!0),c.connect("updateEditor",()=>{i(c.get("updateEditor"))},"ForceUpdateEditor");try{const h=`ws://${window.location.hostname}:9999`;console.log("\u6B63\u5728\u542F\u52A8socket\u8FDE\u63A5\u4F4D\u4E8E\uFF1A"+h);const o=new WebSocket(h);o.onopen=()=>{console.log("socket\u5DF2\u8FDE\u63A5"),o.send("WebGAL Origine \u5DF2\u548C Terre \u5EFA\u7ACB\u8FDE\u63A5")},o.onmessage=u=>{console.log("\u6536\u5230\u4FE1\u606F",u.data)},n.wsConn=o}catch{console.warn("ws\u8FDE\u63A5\u5931\u8D25")}},[]),s("div",{children:[e(Qe,{}),s("main",{className:Jt.main,children:[e(Vt,{}),e(Ln,{})]})]})};function Gn(){const[t,i]=r.exports.useState(!0);return r.exports.useEffect(()=>{c.set("isManageMent",!0),c.connect("isManagement",()=>{i(c.get("isManagement"))},"setIsManagementFunc")},[]),s("div",{className:"App",children:[t&&e(qe,{}),!t&&e(Tn,{})]})}be.render(e(ye.StrictMode,{children:e(Gn,{})}),document.getElementById("root"));
